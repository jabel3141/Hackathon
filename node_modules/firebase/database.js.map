{"version":3,"sources":["../../src/database.ts"],"names":["registerDatabase","INTERNAL","TEST_ACCESS","instance","namespace","registerService","app","getInstance","databaseFromApp","Reference","Query","Database","enableLogging","ServerValue","module","exports"],"mappings":";;;;;QA2BMA,gB,GAAAA,gB;;AAXN;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;IAAYC,Q;;AACZ;;IAAYC,W;;AACZ;;;;;;AAEM,SAAAF,gBAAA,CAA2BG,QAA3B,EAAsD;AAC1D;AACA,QAAMC,YAAYD,SAASF,QAAT,CAAkBI,eAAlB,CAChB,UADgB,EAEhB,UAAAC,GAAA,EAAG;AAAI,eAAA,yBAAYC,WAAZ,GAA0BC,eAA1B,CAA0CF,GAA1C,CAAA;AAA8C,KAFrC;AAGhB;AACA;AACEG,uCADF;AAEEC,2BAFF;AAGEC,oCAHF;AAIEC,0CAJF;AAKEX,kBAAQA,QALV;AAMEY,qBAAa,mBAASA,WANxB;AAOEX,qBAAWA;AAPb,KAJgB,CAAlB;AAeA,QAAI,6BAAJ,EAAiB;AACfY,eAAOC,OAAP,GAAiBX,SAAjB;AACD;AACF,C,CA/CD;;;;;;;;;;;;;;;;AAwEAJ","file":"database.js","sourcesContent":["/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\nimport firebase from './app';\nimport { FirebaseApp, FirebaseNamespace } from './app/firebase_app';\nimport { Database } from './database/api/Database';\nimport { Query } from './database/api/Query';\nimport { Reference } from './database/api/Reference';\nimport { enableLogging } from './database/core/util/util';\nimport { RepoManager } from './database/core/RepoManager';\nimport * as INTERNAL from './database/api/internal';\nimport * as TEST_ACCESS from './database/api/test_access';\nimport { isNodeSdk } from './utils/environment';\n\nexport function registerDatabase(instance: FirebaseNamespace) {\n  // Register the Database Service with the 'firebase' namespace.\n  const namespace = instance.INTERNAL.registerService(\n    'database',\n    app => RepoManager.getInstance().databaseFromApp(app),\n    // firebase.database namespace properties\n    {\n      Reference,\n      Query,\n      Database,\n      enableLogging,\n      INTERNAL,\n      ServerValue: Database.ServerValue,\n      TEST_ACCESS\n    }\n  );\n\n  if (isNodeSdk()) {\n    module.exports = namespace;\n  }\n}\n\n/**\n * Extensions to the FirebaseApp and FirebaseNamespaces interfaces\n */\ndeclare module './app/firebase_app' {\n  interface FirebaseApp {\n    database?(): Database;\n  }\n}\n\ndeclare module './app/firebase_app' {\n  interface FirebaseNamespace {\n    database?: {\n      (app?: FirebaseApp): Database;\n      Database;\n      enableLogging;\n      INTERNAL;\n      Query;\n      Reference;\n      ServerValue;\n    };\n  }\n}\n\nregisterDatabase(firebase);\n"]}