{"version":3,"sources":["../../src/messaging.ts"],"names":["registerMessaging","instance","messagingName","factoryMethod","app","self","namespaceExports","Messaging","INTERNAL","registerService"],"mappings":"AAAA;;;;;;;;;;;;;;;AAeA;;;;;QAMMA,iB,GAAAA,iB;;AAJN;;;;AACA;;;;AACA;;;;;;AAEM,SAAAA,iBAAA,CAA4BC,QAA5B,EAAoC;AACxC,QAAMC,gBAAgB,WAAtB;AACA,QAAMC,gBAAgB,SAAhBA,aAAgB,CAAAC,GAAA,EAAG;AACvB,YAAIC,QAAQ,8BAA8BA,IAA1C,EAAgD;AAC9C,mBAAO,2BAAiBD,GAAjB,CAAP;AACD;AAED;AACA,eAAO,+BAAqBA,GAArB,CAAP;AACD,KAPD;AASA,QAAME,mBAAmB;AACvB;AACAC;AAFuB,KAAzB;AAKAN,aAASO,QAAT,CAAkBC,eAAlB,CACEP,aADF,EAEEC,aAFF,EAGEG,gBAHF;AAKD;AAEDN","file":"messaging.js","sourcesContent":["/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n\nimport WindowController from './messaging/controllers/window-controller';\nimport SWController from './messaging/controllers/sw-controller';\nimport firebase from './app';\n\nexport function registerMessaging(instance) {\n  const messagingName = 'messaging';\n  const factoryMethod = app => {\n    if (self && 'ServiceWorkerGlobalScope' in self) {\n      return new SWController(app);\n    }\n\n    // Assume we are in the window context.\n    return new WindowController(app);\n  };\n\n  const namespaceExports = {\n    // no-inline\n    Messaging: WindowController\n  };\n\n  instance.INTERNAL.registerService(\n    messagingName,\n    factoryMethod,\n    namespaceExports\n  );\n}\n\nregisterMessaging(firebase);\n"]}