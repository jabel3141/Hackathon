{"version":3,"sources":["src/database/core/SnapshotHolder.ts","database/core/SnapshotHolder.js"],"names":["SnapshotHolder","rootNode_","EMPTY_NODE","prototype","getNode","path","getChild","updateSnapshot","newSnapshotNode","updateChild"],"mappings":";;;;;;;AAgBA;;AAIA;;;;;AAKA,IAAAA,iBAAA,YAAA;AAAA,aAAAA,cAAA,GAAA;AACU,aAAAC,SAAA,GAAkB,2BAAaC,UAA/B;AAST;AAPCF,mBAAAG,SAAA,CAAAC,OAAA,GAAA,UAAQC,IAAR,EAAkB;AAChB,eAAO,KAAKJ,SAAL,CAAeK,QAAf,CAAwBD,IAAxB,CAAP;AACD,KAFD;AAIAL,mBAAAG,SAAA,CAAAI,cAAA,GAAA,UAAeF,IAAf,EAA2BG,eAA3B,EAAgD;AAC9C,aAAKP,SAAL,GAAiB,KAAKA,SAAL,CAAeQ,WAAf,CAA2BJ,IAA3B,EAAiCG,eAAjC,CAAjB;AACD,KAFD;AAGF,WAAAR,cAAA;AAVA,CAAA,EAAA,C,CAzBA;;;;;;;;;;;;;;;QCiCSA,c,GAAAA,c","file":"SnapshotHolder.js","sourcesContent":["/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\nimport { ChildrenNode } from './snap/ChildrenNode';\nimport { Path } from './util/Path';\nimport { Node } from './snap/Node';\n\n/**\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\n *\n * @constructor\n */\nexport class SnapshotHolder {\n  private rootNode_: Node = ChildrenNode.EMPTY_NODE;\n\n  getNode(path: Path): Node {\n    return this.rootNode_.getChild(path);\n  }\n\n  updateSnapshot(path: Path, newSnapshotNode: Node) {\n    this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\n  }\n}\n","/**\n* Copyright 2017 Google Inc.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\nimport { ChildrenNode } from './snap/ChildrenNode';\n/**\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\n *\n * @constructor\n */\nvar SnapshotHolder = (function () {\n    function SnapshotHolder() {\n        this.rootNode_ = ChildrenNode.EMPTY_NODE;\n    }\n    SnapshotHolder.prototype.getNode = function (path) {\n        return this.rootNode_.getChild(path);\n    };\n    SnapshotHolder.prototype.updateSnapshot = function (path, newSnapshotNode) {\n        this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\n    };\n    return SnapshotHolder;\n}());\nexport { SnapshotHolder };\n\n\n"]}